ca65 V2.19 - Git 5e5dd1d6c
Main file   : ../bios/zerobss.s
Current file: ../bios/zerobss.s

000000r 1               ; vim: ft=asm_ca65
000000r 1               .autoimport
000000r 1               .globalzp ptr1
000000r 1               .export _zerobss
000000r 1               
000000r 1               .zeropage
000000r 1               
000000r 1               .code
000000r 1               _zerobss:
000000r 1                   ; clear BSS
000000r 1  A9 rr            lda #<__BSS_RUN__
000002r 1  85 rr            sta ptr1
000004r 1  A9 rr            lda #>__BSS_RUN__
000006r 1  85 rr            sta ptr1+1
000008r 1  A9 00            lda #0
00000Ar 1  A8               tay
00000Br 1               ; Clear full pages
00000Br 1               @L1:
00000Br 1  A2 rr            ldx #>__BSS_SIZE__
00000Dr 1  F0 0A            beq @L3
00000Fr 1               @L2:
00000Fr 1  91 rr            sta (ptr1),y
000011r 1  C8               iny
000012r 1  D0 FB            bne @L2
000014r 1  E6 rr            inc ptr1+1
000016r 1  CA               dex
000017r 1  D0 F6            bne @L2
000019r 1               ; Clear remaining page (y is zero on entry)
000019r 1               @L3:
000019r 1  C0 rr            cpy #<__BSS_SIZE__
00001Br 1  F0 05            beq @L4
00001Dr 1  91 rr            sta (ptr1),y
00001Fr 1  C8               iny
000020r 1  D0 F7            bne @L3
000022r 1               @L4:
000022r 1  60               rts
000023r 1               
000023r 1               .bss
000000r 1               
000000r 1               .rodata
000000r 1               
